global {
  # enable webdav module
  webdav.activate = "enable"
  # by default only ro access
  webdav.is-readonly = "enable"
}

$HTTP["remoteip"] !~ env.WHITELIST {
  # Require authentication
  $HTTP["host"] =~ "." {
    auth.backend = "htpasswd"
    auth.backend.htpasswd.userfile = "/etc/lighttpd/htpasswd"
    auth.require = ( "" => ( "method" => "basic",
                             "realm" => "webdav",
                             "require" => "valid-user" ) )
  }
}
